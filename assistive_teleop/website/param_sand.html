<html>
<head>
    <link type="text/css" href="css/rfh_interface.css" rel="stylesheet" />   
    <link type="text/css" href="jqueryui/css/sunny/jquery-ui-1.8.10.custom.css" rel="stylesheet" />   
    <script type="text/javascript" src="jqueryui/js/jquery-1.4.4.min.js"></script> 
    <script type="text/javascript" src="jqueryui/js/jquery-ui-1.8.10.custom.min.js"></script> 
    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="js/rosbridge.min.js"></script>
    <script type="text/javascript" src="rosjs_common/js/common.js"> </script>
    <script type="text/javascript" src="js/rfh_teleop.js"> </script>
    <script type="text/javascript" src="js/rfh_shaving.js"> </script>
    <script type="text/javascript" src="js/rfh_clickable_video.js"> </script>
<script type="text/javascript">
function nop(){};
function json(obj){return JSON.stringify(obj);};
function log(message){ document.getElementById('console').innerHTML = message.toString();};

function load_params(){
    log("Loading Params")
    node.rosjs.callService('/rosbridge/get_param',
                           '["files"]',
                           function(msg){
                               list_options('sel', msg);
                          // window.traj_files = msg;
                           //for (var prop in msg){
                           //        log(prop + "  "+msg[prop])};
                           });
    //node.getParam('files', function(params){window.traj_files = params;
    //log("In got params")});
    };

function list_options(cont_sel, dict){
    for (var key in dict){
        $("#"+cont_sel).append('<option value="'+dict[key]+'">' + key + '</option>');
        };
};

function paralists_cb(cont_sel, msg){
        log(msg.keys.length.toString())
        for (i=0; i<msg.keys.length; i++){
            $(cont_sel).append('<option value="'+msg.vals[i]+'">' + msg.keys[i] + '</option>');
        log("Finished Adding Options")
            }
    };


function start(){
    node = new ros.NodeHandle('ws://localhost:9091');
	node.setOnClose(function(e) {
          log("Disconnected or Can't Connect to " + node.url + ".");
    	});
    	node.setOnError(function(e) {
          log("Unknown error connecting!");
    	});
      	node.setOnOpen(function(e) {   
	  log("Connected to " + node.url + ".");
      //load_params();
      node.subscribe('/paralists',function(msg){paralists_cb('#sel',msg)});
	  });
};

</script>
</head>
  <body onload="start()">
  <div id="console"></div>
    <select id="sel" >
        <option> One </option>
    </select>
</body>
</html>
